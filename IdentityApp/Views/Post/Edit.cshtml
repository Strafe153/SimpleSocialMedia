@model IdentityApp.ViewModels.EditPostViewModel

@{
    ViewData["Title"] = "Editing a post";
}

<link href="~/css/post.css" rel="stylesheet" />

<form asp-action="Edit" method="post" enctype="multipart/form-data">
    <input type="hidden" asp-for="Id" value="@Model.Id" />
    <input type="hidden" asp-for="UserId" value="@Model.UserId" />
    <input type="hidden" asp-for="PostedTime" value="@Model.PostedTime" />

    <div class="form-group">
        <label for="post">Post</label><br />
        <textarea id="post" asp-for="Content" class="form-control" rows="6"></textarea>

        <div class="mt-3">
            @foreach (PostPicture postPicture in Model.PostPictures)
            {
                <span class="post-picture-container">
                    <img height="150" src="data:image/jpeg;base64,@(Convert.ToBase64String(postPicture.PictureData))"
                         class="post-picture" alt="post_picture" />

                    <a asp-action="Delete" asp-controller="PostPicture" asp-route-postId="@Model.Id"
                       asp-route-postPictureId="@postPicture.Id"
                       class="btn btn-danger visible-on-hover-delete-button">Delete</a>
                </span>
            }
        </div>
        <input class="mt-3" type="file" asp-for="AppendedPostPictures" multiple />
    </div>
    <div class="form-group">
        <input type="submit" class="btn btn-primary" value="Save" />
        <a asp-action="Delete" asp-route-postId="@Model.Id"
           class="d-inline float-right btn btn-danger">Delete</a>
    </div>
</form>